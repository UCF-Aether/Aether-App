query DeviceDetails($deviceId: Int!, $start: Datetime = "2000-01-01", $first: Int = 100) {
  device (deviceId: $deviceId) {
    name
    devEui
    activationMethod
    deviceMeta {
      createdAt
      updatedAt
      locUpdatedAt
      lastUplinkAt
      lastDownlinkAt
      locMethod
      loc {
        locGeog {
          longitude
          latitude
        }
      }
    }
  }
  aqi: readingByChans(
    first: $first
    condition: {deviceId: $deviceId, chanName: "AQI"}
    filter: {takenAt: {greaterThanOrEqualTo: $start}}
    orderBy: TAKEN_AT_ASC
  ) {
    ...ReadingFields
  }
  pm2_5: readingByChans(
    first: $first
    condition: {deviceId: $deviceId, chanName: "PM2.5"}
    filter: {takenAt: {greaterThanOrEqualTo: $start}}
    orderBy: TAKEN_AT_ASC
  ) {
    ...ReadingFields
  }
  voc: readingByChans(
    first: $first
    condition: {deviceId: $deviceId, chanName: "VOC"}
    filter: {takenAt: {greaterThanOrEqualTo: $start}}
    orderBy: TAKEN_AT_ASC
  ) {
    ...ReadingFields
  }
  temperature: readingByChans(
    first: $first
    condition: {deviceId: $deviceId, chanName: "TEMPERATURE"}
    filter: {takenAt: {greaterThanOrEqualTo: $start}}
    orderBy: TAKEN_AT_ASC
  ) {
    ...ReadingFields
  }

}

fragment ReadingFields on ReadingByChansConnection {
  nodes {
    val
    takenAt
  }
}
